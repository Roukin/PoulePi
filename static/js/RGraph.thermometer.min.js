RGraph=window.RGraph||{isRGraph:!0},RGraph.Thermometer=function(t){if("object"==typeof t&&"number"==typeof t.min&&"number"==typeof t.max&&"string"==typeof t.id)var e=!0;else var t={id:arguments[0],min:arguments[1],max:arguments[2],value:arguments[3]};if(this.id=t.id,this.canvas=document.getElementById(this.id),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,this.canvas.__object__=this,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,this.type="thermometer",this.isRGraph=!0,this.min=t.min,this.max=t.max,this.value=RGraph.stringsToNumbers(t.value),this.coords=[],this.graphArea=[],this.currentValue=null,this.bulbRadius=0,this.bulbTopRadius=0,this.bulbTopCenterX=0,this.bulbTopCenterY=0,this.coordsText=[],this.original_colors=[],this.firstDraw=!0,this.properties={"chart.colors":["Gradient(#c00:red:#f66:#fcc)"],"chart.gutter.left":15,"chart.gutter.right":15,"chart.gutter.top":15,"chart.gutter.bottom":15,"chart.ticksize":5,"chart.text.color":"black","chart.text.font":"Arial","chart.text.size":10,"chart.units.pre":"","chart.units.post":"","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.title":"","chart.title.side":"","chart.title.side.bold":!0,"chart.title.side.font":null,"chart.shadow":!0,"chart.shadow.offsetx":0,"chart.shadow.offsety":0,"chart.shadow.blur":15,"chart.shadow.color":"gray","chart.resizable":!1,"chart.contextmenu":null,"chart.adjustable":!1,"chart.value.label":!0,"chart.value.label.decimals":null,"chart.value.label.thousand":",","chart.value.label.point":".","chart.labels.count":5,"chart.scale.visible":!1,"chart.scale.decimals":0,"chart.annotatable":!1,"chart.annotate.color":"black","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.tooltips":null,"chart.tooltips.highlight":!0,"chart.tooltips.effect":"fade","chart.tooltips.event":"onclick","chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)"},!this.canvas)return void alert("[THERMOMETER] No canvas support");this.$0={},this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0);var i=RGraph,r=this.canvas,h=r.getContext("2d"),a=this.properties,s=(jQuery,i.Path,window,document),o=Math;i.Effects&&"function"==typeof i.Effects.decorate&&i.Effects.decorate(this),this.set=this.Set=function(t){var e="undefined"==typeof arguments[1]?null:arguments[1];return 1===arguments.length&&"object"==typeof t?(i.parseObjectStyleConfig(this,t),this):("chart."!=t.substr(0,6)&&(t="chart."+t),"chart.ylabels.count"==t&&(t="chart.labels.count"),a[t.toLowerCase()]=e,this)},this.get=this.Get=function(t){return"chart."!=t.substr(0,6)&&(t="chart."+t),a[t]},this.draw=this.Draw=function(){return i.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.currentValue=this.value,this.coordsText=[],this.gutterLeft=a["chart.gutter.left"],this.gutterRight=a["chart.gutter.right"],this.gutterTop=a["chart.gutter.top"],this.gutterBottom=a["chart.gutter.bottom"],this.scale2=i.getScale2(this,{max:this.max,min:this.min,strict:!0,"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.labels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]}),this.DrawBackground(),this.DrawBar(),this.DrawTickMarks(),this.DrawLabels(),a["chart.title"]&&this.DrawTitle(),a["chart.title.side"]&&this.DrawSideTitle(),a["chart.resizable"]&&i.AllowResizing(this),a["chart.contextmenu"]&&i.ShowContext(this),i.InstallEventListeners(this),this.firstDraw&&(i.fireCustomEvent(this,"onfirstdraw"),this.firstDraw=!1,this.firstDrawFunc()),i.FireCustomEvent(this,"ondraw"),this},this.drawBackground=this.DrawBackground=function(){var t=(r.width-this.gutterLeft-this.gutterRight)/2;this.bulbTopRadius=(r.width-this.gutterLeft-this.gutterRight-24)/2,this.bulbTopCenterX=this.gutterLeft+t,this.bulbTopCenterY=this.gutterTop+t,this.bulbBottomRadius=t,this.bulbBottomCenterX=this.gutterLeft+t,this.bulbBottomCenterY=r.height-this.gutterBottom-t,this.bulbRadius=t,h.beginPath(),h.fillStyle="black",a["chart.shadow"]&&i.SetShadow(this,a["chart.shadow.color"],a["chart.shadow.offsetx"],a["chart.shadow.offsety"],a["chart.shadow.blur"]),h.fillRect(this.gutterLeft+12,this.gutterTop+t,r.width-this.gutterLeft-this.gutterRight-24,r.height-this.gutterTop-this.gutterBottom-t-t),h.arc(this.bulbBottomCenterX,this.bulbBottomCenterY,t,0,i.TWOPI,0),h.arc(this.bulbTopCenterX,this.bulbTopCenterY,this.bulbTopRadius,0,i.TWOPI,0),h.fill(),i.NoShadow(this),h.beginPath(),h.fillStyle="white",h.fillRect(this.gutterLeft+12+1,this.gutterTop+t,r.width-this.gutterLeft-this.gutterRight-24-2,r.height-this.gutterTop-this.gutterBottom-t-t),h.arc(this.gutterLeft+t,r.height-this.gutterBottom-t,t-1,0,i.TWOPI,0),h.arc(this.gutterLeft+t,this.gutterTop+t,(r.width-this.gutterLeft-this.gutterRight-24)/2-1,0,i.TWOPI,0),h.fill(),h.beginPath(),h.fillStyle=a["chart.colors"][0],h.arc(this.gutterLeft+t,r.height-this.gutterBottom-t,t-1,0,i.TWOPI,0),h.rect(this.gutterLeft+12+1,r.height-this.gutterBottom-t-t,r.width-this.gutterLeft-this.gutterRight-24-2,t),h.fill(),this.graphArea[0]=this.gutterLeft+12+1,this.graphArea[1]=this.gutterTop+t,this.graphArea[2]=r.width-this.gutterLeft-this.gutterRight-24-2,this.graphArea[3]=r.height-this.gutterBottom-t-t-this.graphArea[1]},this.drawBar=this.DrawBar=function(){var t=(this.value-this.min)/(this.max-this.min)*this.graphArea[3];h.beginPath(),h.fillStyle=a["chart.colors"][0],RGraph.ISOLD&&h.arc(this.bulbBottomCenterX,this.bulbBottomCenterY,this.bulbBottomRadius-1,0,i.TWOPI,!1),h.rect(this.graphArea[0],this.graphArea[1]+this.graphArea[3]-t,this.graphArea[2],t+2),h.fill(),this.coords[0]=[this.graphArea[0],this.graphArea[1]+this.graphArea[3]-t,this.graphArea[2],t]},this.drawTickMarks=this.DrawTickMarks=function(){h.strokeStyle="black";var t=a["chart.ticksize"];h.beginPath();for(var e=this.graphArea[1];e<=this.graphArea[1]+this.graphArea[3];e+=this.graphArea[3]/10)h.moveTo(this.gutterLeft+12,Math.round(e)),h.lineTo(this.gutterLeft+12+t,Math.round(e));h.stroke(),h.beginPath();for(var e=this.graphArea[1];e<=this.graphArea[1]+this.graphArea[3];e+=this.graphArea[3]/10)h.moveTo(r.width-(this.gutterRight+12),Math.round(e)),h.lineTo(r.width-(this.gutterRight+12+t),Math.round(e));h.stroke()},this.drawLabels=this.DrawLabels=function(){if(a["chart.value.label"]){h.fillStyle=a["chart.text.color"];var t=a["chart.scale.visible"]?i.number_format(this,this.value.toFixed("number"==typeof a["chart.value.label.decimals"]?a["chart.value.label.decimals"]:a["chart.scale.decimals"])):i.number_format(this,this.value.toFixed("number"==typeof a["chart.value.label.decimals"]?a["chart.value.label.decimals"]:a["chart.scale.decimals"]),a["chart.units.pre"],a["chart.units.post"]);i.Text2(this,{font:a["chart.text.font"],size:a["chart.text.size"],x:this.gutterLeft+this.bulbRadius,y:this.coords[0][1]+7,text:t,valign:"top",halign:"center",bounding:!0,boundingFill:"white",tag:"value.label"})}a["chart.scale.visible"]&&this.DrawScale()},this.drawTitle=this.DrawTitle=function(){h.fillStyle=a["chart.text.color"],i.Text2(this,{font:a["chart.text.font"],size:a["chart.text.size"]+2,x:this.gutterLeft+(r.width-this.gutterLeft-this.gutterRight)/2,y:this.gutterTop,text:String(a["chart.title"]),valign:"center",halign:"center",bold:!0,tag:"title"})},this.drawSideTitle=this.DrawSideTitle=function(){var t=a["chart.title.side.font"]?a["chart.title.side.font"]:a["chart.text.font"],e=a["chart.title.side.size"]?a["chart.title.side.size"]:a["chart.text.size"]+2;h.fillStyle=a["chart.text.color"],i.Text2(this,{font:t,size:e+2,x:this.gutterLeft-3,y:(r.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop,text:String(a["chart.title.side"]),valign:"center",halign:"center",angle:270,bold:a["chart.title.side.bold"],tag:"title.side"})},this.drawScale=this.DrawScale=function(){var t=a["chart.labels.count"],e=(this.max-this.min)/t;h.fillStyle=a["chart.text.color"];for(var s=a["chart.text.font"],o=a["chart.text.size"],l=a["chart.units.pre"],n=a["chart.units.post"],c=a["chart.scale.decimals"],u=1;t>=u;++u){var g=r.width-this.gutterRight,d=r.height-this.gutterBottom-2*this.bulbRadius-this.graphArea[3]/t*u,f=i.number_format(this,String((this.min+u*e).toFixed(c)),l,n);i.Text2(this,{font:s,size:o,x:g-6,y:d,text:f,valign:"center",tag:"scale"})}i.Text2(this,{font:s,size:o,x:g-6,y:r.height-this.gutterBottom-2*this.bulbRadius,text:i.number_format(this,this.min.toFixed(c),l,n),valign:"center",tag:"scale"})},this.getShape=this.getBar=function(t){for(var e=0;e<this.coords.length;e++){var r=RGraph.getMouseXY(t),h=r[0],s=r[1],o=this.coords[e][0],l=this.coords[e][1],n=this.coords[e][2],c=this.coords[e][3];if(h>=o&&o+n>=h&&s>=l&&s<=l+c+this.bulbBottomRadius||i.getHypLength(this.bulbBottomCenterX,this.bulbBottomCenterY,h,s)<=this.bulbBottomRadius){var u=i.parseTooltipText?i.parseTooltipText(a["chart.tooltips"],e):"";return{0:this,object:this,1:o,x:o,2:l,y:l,3:n,width:n,4:c,height:c,5:e,index:e,tooltip:u}}}return null},this.getValue=function(t){if(2==t.length)var e=(t[0],t[1]);else var i=RGraph.getMouseXY(t),e=(i[0],i[1]);var r=this.graphArea[3]-(e-this.graphArea[1]);return r=r/this.graphArea[3]*(this.max-this.min),r+=this.min,r=Math.max(r,this.min),r=Math.min(r,this.max)},this.highlight=this.Highlight=function(t){a["chart.tooltips.highlight"]&&(h.beginPath(),h.strokeStyle=a["chart.highlight.stroke"],h.fillStyle=a["chart.highlight.fill"],h.rect(t.x,t.y,t.width,t.height+this.bulbBottomRadius),h.arc(this.bulbBottomCenterX,this.bulbBottomCenterY,this.bulbBottomRadius-1,0,i.TWOPI,!1),h.stroke,h.fill())},this.getObjectByXY=function(t){var e=RGraph.getMouseXY(t);return e[0]>this.gutterLeft&&e[0]<r.width-this.gutterRight&&e[1]>=this.gutterTop&&e[1]<=r.height-this.gutterBottom?this:void 0},this.adjusting_mousemove=this.Adjusting_mousemove=function(t){if(a["chart.adjustable"]&&i.Registry.Get("chart.adjusting")&&i.Registry.Get("chart.adjusting").uid==this.uid){var e=(RGraph.getMouseXY(t),this.getValue(t));"number"==typeof e&&(i.FireCustomEvent(this,"onadjust"),this.value=Number(e.toFixed(a["chart.scale.decimals"])),i.redrawCanvas(r))}},this.positionTooltip=function(t,e,i,h){var a=t.coords[h.__index__][0],o=t.coords[h.__index__][1],l=t.coords[h.__index__][2],n=(t.coords[h.__index__][3],RGraph.getCanvasXY(r)),c=(t.gutterLeft,t.gutterTop,h.offsetWidth),u=h.offsetHeight;h.style.left=0,h.style.top=n[1]+o-u-7+"px",h.style.overflow="";var g=new Image;g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",g.style.position="absolute",g.id="__rgraph_tooltip_pointer__",g.style.top=h.offsetHeight-2+"px",h.appendChild(g),n[0]+a-c/2<10?(h.style.left=n[0]+a-.1*c+l/2+"px",g.style.left=.1*c-8.5+"px"):n[0]+a+c/2>s.body.offsetWidth?(h.style.left=n[0]+a-.9*c+l/2+"px",g.style.left=.9*c-8.5+"px"):(h.style.left=n[0]+a+l/2-.5*c+"px",g.style.left=.5*c-8.5+"px")},this.getYCoord=function(t){if(t>this.max||t<this.min)return null;var e=this.graphArea[1]+this.graphArea[3]-(t-this.min)/(this.max-this.min)*this.graphArea[3];return e},this.overChartArea=function(t){var e=i.getMouseXY(t),r=e[0],h=e[1];return r>=this.graphArea[0]&&r<=this.graphArea[0]+this.graphArea[2]&&h>=this.graphArea[1]&&h<=this.graphArea[1]+this.graphArea[3]+this.bulbRadius?!0:i.getHypLength(this.bulbBottomCenterX,this.bulbBottomCenterY,r,h)<=this.bulbRadius?!0:i.getHypLength(this.bulbTopCenterX,this.bulbTopCenterY,r,h)<=this.bulbTopRadius?!0:!1},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors["chart.colors"]=i.array_clone(a["chart.colors"]));for(var t=a["chart.colors"],e=0;e<t.length;++e)t[e]=this.parseSingleColorForGradient(t[e])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t)return t;if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){var e=RegExp.$1.split(":"),s=h.createLinearGradient(a["chart.gutter.left"],0,r.width-a["chart.gutter.right"],0),o=1/(e.length-1);s.addColorStop(0,i.trim(e[0]));for(var l=1;l<e.length;++l)s.addColorStop(l*o,i.trim(e[l]))}return s?s:t},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),this[t]=e,this},this.firstDrawFunc=function(){},this.grow=function(){function t(){e.value=n*c+a,RGraph.clear(e.canvas),RGraph.redrawCanvas(e.canvas),h>c?(c++,RGraph.Effects.updateCanvas(t)):i(e)}var e=this,i=arguments[1]||function(){},r=arguments[0]||{},h=r.frames?r.frames:30,a=Number(e.currentValue),s=e.value;s=o.min(s,this.max),s=o.max(s,this.min);var l=s-a,n=l/h,c=0;return t(),this},i.Register(this),e&&i.parseObjectStyleConfig(this,t.options)};